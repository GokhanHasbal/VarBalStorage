!function(s){"use strict";var i=s(document),o=s(window),a=s("body"),n=s(".site-footer .site-footer-bottom"),l=s(".search-screen"),r=window.lemonLimesIsRTL,m=s(".sidemenu"),c=s(".to-top, #page > .post-like.sharing-like-icon.sticky-post-like"),h=lemonLimesParseInt(a.offset().top);function t(){s("#masthead .primary-menu .mega-menu").each(function(){r?s(this).children("ul").css("right",-(window.lemonLimesInnerWidth-s(this).offset().left-s(this).outerWidth(!0))):s(this).children("ul").css("left",-s(this).offset().left)})}function d(e,t){e.length&&t.length&&(1<t.val()?e.removeAttr("disabled"):e.attr("disabled","disabled"))}lemonLimes=lemonLimes||{},lemonLimes.pages=lemonLimes.pages||{},lemonLimes.pages.all={init:function(){var n=this;this.fixPrimaryMenu(),n.checkFooterIcons(lemonLimesParseInt(o.scrollTop())),i.on("scrolling.lemonlimes.window resize.lemonlimes.window",function(e,t){n.checkFooterIcons(t.top)})},checkFooterIcons:function(e){var t;c.length&&(t=n.length?n.outerHeight()-37:100,150<e&&e<i.height()-lemonLimesInnerHeight-t?c.addClass("show"):c.removeClass("show"))},fixPrimaryMenu:function(){var n,e=s("#masthead .primary-menu > li");e.length&&(e.filter(".mega-menu").length&&(t(),o.on("resize.lemonlimes.window",function(){t()})),e.filter(".menu-item-has-children").not(".mega-menu").length&&(n=lemonLimesParseInt(window.lemonLimesInnerWidth-10),e.filter(".menu-item-has-children").not(".mega-menu").on("mouseover",function(e){var t;s(this).hasClass("right")||(t=s(this)).find("ul.sub-menu").each(function(){return r&&s(this).offset().left<lemonLimesParseInt(s("#page").offset().left+10)||!r&&lemonLimesParseInt(s(this).offset().left+s(this).outerWidth(!0))>n?(t.addClass("right"),!1):void 0})}),o.on("resize.lemonlimes.window",function(){n=lemonLimesParseInt(window.lemonLimesInnerWidth-10),e.filter(".menu-item-has-children").removeClass("right")}))),s("#masthead .sub-menu").length&&s("#masthead .sub-menu").removeClass("hide")}},i.on("lemonlimes.init",function(){lemonLimes.pages.all.init()}),document.addEventListener("DOMContentLoaded",function(){var e,t,n=s(".comment-content img, .post-entry img");wp&&wp.customize;i.trigger("lemonlimes.init"),s("body.page #primary iframe, body.single #primary iframe").length&&(t=['iframe[data-src*="videopress.com"]','iframe[data-src*="video.wordpress.com"]','iframe[data-src*="player.vimeo.com"]','iframe[data-src*="youtube.com"]','iframe[data-src*="youtube-nocookie.com"]','iframe[data-src*="kickstarter.com"][src*="video.html"]'],(e=s("body.page #primary, body.single #primary")).fitVids({customSelector:'iframe[src*="video.wordpress.com"]'}),e.find(t.join(",")).length&&e.find(t.join(",")).each(function(){var e=s(this),t=lemonLimesParseInt(e.attr("width")),n=lemonLimesParseInt(e.attr("height"));!s(this).parents(".fluid-width-video-wrapper").length&&t&&n&&e.attr("src",e.data("src")).wrap(s("<div>",{class:"fluid-width-video-wrapper"}).css("padding-top",n/t*100+"%")).removeAttr("height").removeAttr("width")})),o.on("load",function(){var e;window.location.hash&&"#comments"==window.location.hash&&s("#comments").length&&(e=s("#comments").offset().top-h,s("html, body").animate({scrollTop:e},200))}),i.on("click",".to-top.show",function(e){e.preventDefault(),s("html, body").animate({scrollTop:0},Math.min(800,Math.max(300,Math.round(o.scrollTop()/5))))}).on("click",".site-header #menu-toggle",function(e){e.preventDefault(),m.length&&(s(this).toggleClass("toggled-on"),s(this).hasClass("toggled-on")?(m.addClass("show"),a.css("overflow","hidden")):(m.removeClass("show"),a.css("overflow","")))}).on("click",".sidemenu.show .close-button",function(e){e.preventDefault(),e.stopPropagation(),s(".site-header #menu-toggle").removeClass("toggled-on"),m.removeClass("show"),a.css("overflow","")}).on("click",".sidemenu",function(e){e=s(e.target);e.hasClass("sidemenu")&&e.hasClass("show")&&s(".sidemenu .close-button").trigger("click")}).on("mouseover","#masthead .primary-menu .mega-menu .sub-cat-list li",function(){var e;s(this).hasClass("current")||(e=s(this).parents(".sub-cat-list").first().siblings(".sub-cat-posts").first(),s(this).siblings(".current").removeClass("current").end().addClass("current"),e.children(".current").removeClass("current"),e.children("."+s(this).attr("data-id")).addClass("current"))}).on("click",".main-navigation .dropdown-toggle, .secondary-navigation .dropdown-toggle",function(e){e.preventDefault(),s(this).hasClass("toggled-on")?s(this).parent().find(".toggled-on").removeClass("toggled-on"):(s(this).parent().siblings("li").find(".toggled-on").removeClass("toggled-on"),s(this).addClass("toggled-on"))}).on("click",".site-header .site-header-search",function(e){e.preventDefault(),l.length&&(l.hasClass("show")||(l.addClass("show"),setTimeout(function(){l.find("form .search-field").focus()},250),a.css("overflow","hidden")))}).on("click",".search-screen.show .close-button",function(e){e.preventDefault(),l.removeClass("show"),a.css("overflow","")}).on("click",".single #primary .post-footer .comments-link a",function(e){e.preventDefault();e=s("#comments");e.length&&(e=e.offset().top-h,s("html, body").animate({scrollTop:e},200))}).on("click",function(e){var t=s("#masthead .menu-item.focused");t.length&&t.removeClass("focused")}).on("keyup",function(e){var t;9===(e.keyCode||e.which)&&(t=s(e.target),e=s("#masthead .menu-item"),t.hasClass("menu-item")||t.parents(".menu-item").length?(t=t.parents(".menu-item").length?t.parents(".menu-item").last():t,e.removeClass("focused"),t.addClass("focused")):e.removeClass("focused"))}).on("click",".quantity.lemon-limes-quantity .minus",function(e){e.preventDefault();var t=s(this).siblings(".qty");t.length&&(0<(e=t.val())&&t.val(e-1).trigger("change"),d(s(this),t))}).on("click",".quantity.lemon-limes-quantity .plus",function(e){e.preventDefault();var t=s(this).siblings(".qty");t.length&&(e=t.val(),t.val(++e).trigger("change"),s(this).siblings(".minus").removeAttr("disabled"))}),s(".quantity.lemon-limes-quantity .minus").length&&s(".quantity.lemon-limes-quantity .minus").each(function(){d(s(this),s(this).siblings(".qty"))}),n.length&&n.each(function(){s(this).parent("a").length&&s(this).parent("a").addClass("image-link")}),s(".post-content-gallery.gallery-justified").lemonLimesJustifiedGallery()})}(jQuery);
